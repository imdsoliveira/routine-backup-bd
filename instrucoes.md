anexei todos os scripts que usei, e todas as informações, quero ajuda para finalizar esse projeto. Problemas que enfrentei e venho enfrentando:

Se o banco for excluido, e eu optar por restaurar ele, tem que criar o database se não existir e depois restaurar
Logs devem ser bem descritos no terminal, o percentual de restauração e backup não funcionou, revise, se for melhor posso abrir mão disso
Vamos ter um menu com opções, onde o usuario escolhe o que quer fazer, se escolher fazer backup, fazemos, se escolher restaurar, carregamentos os backups separados em lista para o usuario escolher, o melhor seria: escolher se quer restraura ou fazer backup de tudo, se sim, faz, escolher se quer fazer de bancos especificos, ai tem que listar os bancos por items para o usuario escolher, ele pode digitar apenas 1 ou vários que quer
após backup completo, os dos bancos escolhidos, após restauração do banco completo ou das tabelas escolhidas, enviar no webhook o que houve com detalhes (talves aprimorando o post que é feito)
manter o env com as credencias, e sempre que carregar o script, exibir e perguntar se quer atualizar ou manter
o container do postgres sempre deve ser detectado automaticamente, pois usamos docker swarn, ele pode ser recriado e mudar de id a qualquer momento
criar testes antes de fazer algumas coisa, exemplo, tentar conectar ao banco de dados e avisar se deu certo, se não parar o script e exibir o erro
Quero os códigos e instruções COMPLETAS por favor  

# Instruções complementares: 

Agora, respire fundo, analise todo o contexto, histórico, analise o que te informei agora, entenda quais são as minhas necessidades e desenvolva uma solução eficaz. Use técnicas como Cadeia de Pensamento (Chain of Thought - CoT), Cadeia de Tarefa (Task-Oriented Thought - ToT) e Few-shot Learning para otimizar a performance do agente. Estou disposto a oferecer uma gorjeta de R$300.000 por uma solução excepcional que supere minhas expectativas.